webpackJsonp([20],{"49b7":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("fZjL"),n=r.n(a),s=r("mvHQ"),i=r.n(s),o={name:"Need",components:{TopNav:r("Hu0/").a},data:function(){return{priceType:"DISCUSS",serverArr:[],otherList:[],menutext:"额外需求"}},mounted:function(){this.getOther();var e=localStorage.getItem("need");e&&(e=JSON.parse(e),this.priceType=e.priceType)},methods:{priceTypeChange:function(e){var t={};t.priceType=e,localStorage.setItem("need",i()(t))},serverArrHandler:function(e){localStorage.setItem("serverArr",i()(e));var t=localStorage.getItem("otherList");t&&((t=JSON.parse(t)).map(function(t){e.map(function(e){e==t.seqId&&(t.checked=!0)})}),localStorage.setItem("serverArr",i()(t)))},getPlatformHandler:function(){this.$router.push("/platformstandard")},getOther:function(){var e=this,t={headSeqId:JSON.parse(localStorage.getItem("cartObject")).seqId,attachType:"OTHER"};this.$api.carStyleDetFindMap(t).then(function(t){if(200==t.code){var r=t.data,a=[];n()(r).forEach(function(e){var t=r[e][0];t.keyValue=e,t.checked=!1,a.push(t)}),e.otherList=a;var s=localStorage.getItem("serverArr");s?(s=JSON.parse(s),e.otherList.map(function(e){s.map(function(t){e.seqId==t&&(e.checked=!0)})}),localStorage.setItem("otherList",i()(e.otherList)),e.serverArr=s):localStorage.setItem("otherList",i()(e.otherList))}})},needHandler:function(e){if("STANDARD"==this.priceType){var t=localStorage.getItem("platform");if(t){if(!(t=JSON.parse(t)).goodwidth)return this.$toast("请选择货物最长");if(!t.goodheight)return this.$toast("请选择货物最高");if(!t.goodsend)return this.$toast("请选择搬运楼层发货地");if(!t.goodreceive)return this.$toast("请选择搬运楼层收货地")}}this.$router.push("/confirmorder")}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"need"},[r("TopNav",{attrs:{menu:e.menutext}}),e._v(" "),r("div",{staticClass:"needtitle"},[e._v("\n    计价方式\n  ")]),e._v(" "),r("div",{staticClass:"needprice"},[r("van-radio-group",{attrs:{"checked-color":"#28ae3a"},on:{change:e.priceTypeChange},model:{value:e.priceType,callback:function(t){e.priceType=t},expression:"priceType"}},[r("van-radio",{attrs:{name:"STANDARD"},on:{click:e.getPlatformHandler}},[r("div",{staticClass:"payitem"},[r("span",{staticClass:"payname"},[e._v("平台标准计价")]),e._v(" "),r("van-icon",{attrs:{name:"warning-o",color:"#333333",size:"18"}})],1)]),e._v(" "),r("van-radio",{attrs:{name:"DISCUSS"}},[r("div",{staticClass:"payitem"},[r("span",{staticClass:"payname"},[e._v("与司机协商计划")])])])],1)],1),e._v(" "),e.otherList.length?r("div",{staticClass:"otherwrap"},[r("div",{staticClass:"needtitle needtitlefix"},[e._v("\n      其他服务\n    ")]),e._v(" "),r("van-checkbox-group",{on:{change:e.serverArrHandler},model:{value:e.serverArr,callback:function(t){e.serverArr=t},expression:"serverArr"}},e._l(e.otherList,function(t,a){return r("van-checkbox",{key:a,attrs:{name:t.seqId,"checked-color":"#28ae3a"}},[r("div",{staticClass:"severitem"},[r("span",[e._v(e._s(t.catItem))]),e._v(" "),r("div",{class:["fee",0==t.price?"gray":""]},[e._v("\n            "+e._s(t.remarks)+"\n          ")])])])}),1)],1):e._e(),e._v(" "),r("div",{staticClass:"fixedbtn"},[r("van-button",{attrs:{type:"primary",color:"#28ae3a",round:"",block:"",size:"small"},on:{click:e.needHandler}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var l=r("VU/8")(o,c,!1,function(e){r("td0C")},"data-v-1a255794",null);t.default=l.exports},td0C:function(e,t){}});
//# sourceMappingURL=20.bc8d17ef17b84a03fab5.js.map?v=1604223935039